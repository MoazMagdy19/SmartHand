<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SmartHand Trainer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen active">
        <div class="splash-container">
            <div class="splash-content">
                <img src="WhatsApp Image 2025-11-09 at 16.28.48_a94e974f.jpg" alt="SmartHand Logo" class="splash-logo">
                <h1 class="splash-title">SmartHand Trainer</h1>
                <p class="splash-subtitle">Salma Haseeb</p>
                <div class="splash-loader">
                    <div class="loader-dot"></div>
                    <div class="loader-dot"></div>
                    <div class="loader-dot"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bluetooth Connection Screen -->
    <div id="connection-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('splash-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="connection-title">Connect Device</h1>
        </div>
        <div class="screen-content connection-content">
            <div class="connection-icon-wrapper">
                <div class="connection-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                    </svg>
                </div>
            </div>
            <h2 class="connection-subtitle" data-i18n="connection-subtitle">Scan for nearby Bluetooth devices</h2>
            <div id="connection-status" class="connection-status">
                <div id="scanning-indicator" class="scanning-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <p data-i18n="scanning">Scanning...</p>
                </div>
                <div id="no-devices" class="no-devices" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v4m0 12v4M2 12h4m12 0h4"/>
                    </svg>
                    <p>No devices found</p>
                </div>
            </div>
            <div id="device-list" class="device-list"></div>
            <button id="scan-btn" class="btn-primary btn-large" onclick="startBluetoothScan()">
                <span data-i18n="scan">Scan Devices</span>
            </button>
        </div>
    </div>

    <!-- Control Panel Screen -->
    <div id="control-screen" class="screen">
        <div class="control-header">
            <div class="connection-status-card">
                <div class="connection-info">
                    <div class="connection-icon-small">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                        </svg>
                    </div>
                    <div class="connection-details">
                        <p class="connection-status-text" data-i18n="connected">Connected</p>
                        <p class="device-name" id="device-name">SmartHand Pro V2</p>
                    </div>
                </div>
                <div class="battery-info">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="16" height="10" rx="2"/>
                        <line x1="6" y1="11" x2="6" y2="13"/>
                    </svg>
                    <span id="battery-level">85%</span>
                </div>
            </div>
        </div>
        <div class="screen-content">
            <h2 class="section-title" data-i18n="control">Control Panel</h2>
            
            <div class="control-buttons-grid">
                <button class="control-btn btn-open" onclick="sendCommand('open', event)" data-command="open">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M2 12h20"/>
                    </svg>
                    <span data-i18n="openHand">Open Hand</span>
                </button>
                <button class="control-btn btn-close" onclick="sendCommand('close', event)" data-command="close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                    </svg>
                    <span data-i18n="closeHand">Close Hand</span>
                </button>
                <button class="control-btn btn-light-grip" onclick="sendCommand('light_grip', event)" data-command="light_grip">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 12h8M12 8v8"/>
                    </svg>
                    <span data-i18n="lightGrip">Light Grip</span>
                </button>
                <button class="control-btn btn-strong-grip" onclick="sendCommand('strong_grip', event)" data-command="strong_grip">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <span data-i18n="strongGrip">Strong Grip</span>
                </button>
                <button class="control-btn btn-stop" onclick="sendCommand('stop', event)" data-command="stop">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <rect x="6" y="6" width="12" height="12" rx="2"/>
                    </svg>
                    <span data-i18n="stop">Stop</span>
                </button>
            </div>

            <div class="grip-slider-card">
                <h3 class="slider-title" data-i18n="gripStrength">Grip Strength: <span id="grip-value">50</span>%</h3>
                <div class="slider-container">
                    <input type="range" id="grip-slider" min="0" max="100" value="50" class="grip-slider" oninput="updateGripStrength(this.value)">
                </div>
            </div>

            <div class="nav-buttons-grid">
                <button class="nav-card-btn" onclick="showScreen('calibration-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    <span data-i18n="calibrate">Calibrate</span>
                </button>
                <button class="nav-card-btn" onclick="showScreen('training-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M2 12h20"/>
                    </svg>
                    <span data-i18n="training">Training</span>
                </button>
                <button class="nav-card-btn" onclick="showScreen('progress-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    <span data-i18n="progress">Progress</span>
                </button>
                <button class="nav-card-btn" onclick="showScreen('logs-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    <span data-i18n="logs">Logs</span>
                </button>
                <button class="nav-card-btn" onclick="showScreen('settings-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                    </svg>
                    <span data-i18n="settings">Settings</span>
                </button>
                <button class="nav-card-btn" onclick="showScreen('about-screen')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                    <span data-i18n="about">About</span>
                </button>
            </div>
        </div>

        <!-- Voice Control Button -->
        <button class="voice-btn" id="voice-btn" onclick="toggleVoiceControl()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                <line x1="12" y1="19" x2="12" y2="23"/>
                <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
        </button>
    </div>

    <!-- Hand Animation Screens -->
    <!-- Open Hand Animation -->
    <div id="hand-open-screen" class="screen hand-animation-screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="openHand">Open Hand</h1>
        </div>
        <div class="hand-animation-container">
            <div class="hand-wrapper">
                    <div class="hand-model hand-open-animation" id="hand-open-model">
                    <!-- Hand SVG Model -->
                    <svg class="hand-root" viewBox="0 0 300 300" aria-hidden="false" role="img">
                        <g class="palm">
                            <ellipse cx="150" cy="200" rx="45" ry="30" fill="#f5f5dc"/>
                            <rect x="105" y="185" width="90" height="25" rx="12" fill="#f5f5dc"/>
                            <rect x="110" y="190" width="80" height="4" fill="#3b82f6"/>
                        </g>
                        <g class="finger finger-index" data-finger="index">
                            <rect class="phalange phalange-1" x="135" y="140" width="20" height="35" rx="10" fill="#d4a574" transform-origin="145 157.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-2" x="135" y="105" width="18" height="35" rx="9" fill="#d4a574" transform-origin="144 122.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-3" x="135" y="70" width="16" height="35" rx="8" fill="#d4a574" transform-origin="143 87.5" transform="rotate(0)"/>
                        </g>
                        <g class="finger finger-middle" data-finger="middle">
                            <rect class="phalange phalange-1" x="155" y="135" width="20" height="35" rx="10" fill="#d4a574" transform-origin="165 152.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-2" x="155" y="100" width="18" height="35" rx="9" fill="#d4a574" transform-origin="164 117.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-3" x="155" y="65" width="16" height="35" rx="8" fill="#d4a574" transform-origin="163 82.5" transform="rotate(0)"/>
                        </g>
                        <g class="finger finger-ring" data-finger="ring">
                            <rect class="phalange phalange-1" x="175" y="140" width="20" height="35" rx="10" fill="#d4a574" transform-origin="185 157.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-2" x="175" y="105" width="18" height="35" rx="9" fill="#d4a574" transform-origin="184 122.5" transform="rotate(0)"/>
                            <rect class="phalange phalange-3" x="175" y="70" width="16" height="35" rx="8" fill="#d4a574" transform-origin="183 87.5" transform="rotate(0)"/>
                        </g>
                        <g class="finger finger-pinky" data-finger="pinky">
                            <rect class="phalange phalange-1" x="195" y="145" width="18" height="30" rx="9" fill="#d4a574" transform-origin="204 160" transform="rotate(0)"/>
                            <rect class="phalange phalange-2" x="195" y="115" width="16" height="30" rx="8" fill="#d4a574" transform-origin="203 130" transform="rotate(0)"/>
                            <rect class="phalange phalange-3" x="195" y="85" width="14" height="30" rx="7" fill="#d4a574" transform-origin="202 100" transform="rotate(0)"/>
                        </g>
                        <g class="thumb" data-finger="thumb">
                            <rect class="phalange th-1" x="100" y="170" width="18" height="25" rx="9" fill="#d4a574" transform-origin="109 182.5" transform="rotate(0)"/>
                            <rect class="phalange th-2" x="85" y="160" width="16" height="25" rx="8" fill="#d4a574" transform-origin="93 172.5" transform="rotate(0)"/>
                            <rect class="phalange th-3" x="70" y="150" width="14" height="25" rx="7" fill="#d4a574" transform-origin="77 162.5" transform="rotate(0)"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="animation-status">
                <p class="status-text" data-i18n="opening-hand">Opening Hand...</p>
                <div class="bluetooth-indicator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                    </svg>
                    <span id="open-command-text">Sending: OPEN</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Close Hand Animation -->
    <div id="hand-close-screen" class="screen hand-animation-screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="closeHand">Close Hand</h1>
        </div>
        <div class="hand-animation-container">
            <div class="hand-wrapper">
                <div class="hand-model hand-close-animation" id="hand-close-model">
                    <!-- Hand SVG Model -->
                    <svg class="hand-root" viewBox="0 0 300 300" aria-hidden="false" role="img">
                        <g class="palm">
                            <ellipse cx="150" cy="200" rx="45" ry="30" fill="#f5f5dc"/>
                            <rect x="105" y="185" width="90" height="25" rx="12" fill="#f5f5dc"/>
                            <rect x="110" y="190" width="80" height="4" fill="#3b82f6"/>
                        </g>
                        <g class="finger finger-index" data-finger="index">
                            <rect class="phalange phalange-1" x="135" y="140" width="20" height="35" rx="10" fill="#d4a574" transform-origin="145 157.5" transform="rotate(-30)"/>
                            <rect class="phalange phalange-2" x="135" y="105" width="18" height="35" rx="9" fill="#d4a574" transform-origin="144 122.5" transform="rotate(-60)"/>
                            <rect class="phalange phalange-3" x="135" y="70" width="16" height="35" rx="8" fill="#d4a574" transform-origin="143 87.5" transform="rotate(-90)"/>
                        </g>
                        <g class="finger finger-middle" data-finger="middle">
                            <rect class="phalange phalange-1" x="155" y="135" width="20" height="35" rx="10" fill="#d4a574" transform-origin="165 152.5" transform="rotate(-25)"/>
                            <rect class="phalange phalange-2" x="155" y="100" width="18" height="35" rx="9" fill="#d4a574" transform-origin="164 117.5" transform="rotate(-50)"/>
                            <rect class="phalange phalange-3" x="155" y="65" width="16" height="35" rx="8" fill="#d4a574" transform-origin="163 82.5" transform="rotate(-75)"/>
                        </g>
                        <g class="finger finger-ring" data-finger="ring">
                            <rect class="phalange phalange-1" x="175" y="140" width="20" height="35" rx="10" fill="#d4a574" transform-origin="185 157.5" transform="rotate(-20)"/>
                            <rect class="phalange phalange-2" x="175" y="105" width="18" height="35" rx="9" fill="#d4a574" transform-origin="184 122.5" transform="rotate(-40)"/>
                            <rect class="phalange phalange-3" x="175" y="70" width="16" height="35" rx="8" fill="#d4a574" transform-origin="183 87.5" transform="rotate(-60)"/>
                        </g>
                        <g class="finger finger-pinky" data-finger="pinky">
                            <rect class="phalange phalange-1" x="195" y="145" width="18" height="30" rx="9" fill="#d4a574" transform-origin="204 160" transform="rotate(-15)"/>
                            <rect class="phalange phalange-2" x="195" y="115" width="16" height="30" rx="8" fill="#d4a574" transform-origin="203 130" transform="rotate(-30)"/>
                            <rect class="phalange phalange-3" x="195" y="85" width="14" height="30" rx="7" fill="#d4a574" transform-origin="202 100" transform="rotate(-45)"/>
                        </g>
                        <g class="thumb" data-finger="thumb">
                            <rect class="phalange th-1" x="100" y="170" width="18" height="25" rx="9" fill="#d4a574" transform-origin="109 182.5" transform="rotate(-30)"/>
                            <rect class="phalange th-2" x="85" y="160" width="16" height="25" rx="8" fill="#d4a574" transform-origin="93 172.5" transform="rotate(-60)"/>
                            <rect class="phalange th-3" x="70" y="150" width="14" height="25" rx="7" fill="#d4a574" transform-origin="77 162.5" transform="rotate(-90)"/>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="animation-status">
                <p class="status-text" data-i18n="closing-hand">Closing Hand...</p>
                <div class="bluetooth-indicator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                    </svg>
                    <span id="close-command-text">Sending: CLOSE</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Light Grip Animation -->
    <div id="hand-light-grip-screen" class="screen hand-animation-screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="lightGrip">Light Grip</h1>
        </div>
        <div class="hand-animation-container">
            <div class="hand-wrapper">
                <div class="hand-model hand-light-grip-animation" id="hand-light-grip-model">
                    <!-- Hand SVG Model -->
                    <svg viewBox="0 0 200 300" class="hand-svg">
                        <ellipse cx="100" cy="280" rx="35" ry="20" fill="#f5f5dc"/>
                        <rect x="65" y="260" width="70" height="30" rx="15" fill="#f5f5dc"/>
                        <rect x="70" y="265" width="60" height="3" fill="#3b82f6"/>
                        <ellipse cx="100" cy="200" rx="45" ry="35" fill="#d4a574"/>
                        <ellipse cx="125" cy="185" rx="12" ry="20" fill="#d4a574" transform="rotate(35 125 185)"/>
                        <rect x="110" y="160" width="18" height="30" rx="9" fill="#d4a574" transform="rotate(15 119 175)"/>
                        <rect x="95" y="155" width="18" height="35" rx="9" fill="#d4a574" transform="rotate(5 104 172)"/>
                        <rect x="80" y="160" width="18" height="30" rx="9" fill="#d4a574" transform="rotate(-5 89 175)"/>
                        <rect x="65" y="165" width="15" height="25" rx="7.5" fill="#d4a574" transform="rotate(-10 72.5 177)"/>
                    </svg>
                </div>
            </div>
            <div class="animation-status">
                <p class="status-text" data-i18n="light-gripping">Light Gripping...</p>
                <div class="bluetooth-indicator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                    </svg>
                    <span id="light-grip-command-text">Sending: LIGHT_GRIP</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Strong Grip Animation -->
    <div id="hand-strong-grip-screen" class="screen hand-animation-screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="strongGrip">Strong Grip</h1>
        </div>
        <div class="hand-animation-container">
            <div class="hand-wrapper">
                <div class="hand-model hand-strong-grip-animation" id="hand-strong-grip-model">
                    <!-- Hand SVG Model -->
                    <svg viewBox="0 0 200 300" class="hand-svg">
                        <ellipse cx="100" cy="280" rx="35" ry="20" fill="#f5f5dc"/>
                        <rect x="65" y="260" width="70" height="30" rx="15" fill="#f5f5dc"/>
                        <rect x="70" y="265" width="60" height="3" fill="#3b82f6"/>
                        <ellipse cx="100" cy="200" rx="45" ry="35" fill="#d4a574"/>
                        <ellipse cx="115" cy="195" rx="12" ry="20" fill="#d4a574" transform="rotate(70 115 195)"/>
                        <rect x="110" y="175" width="18" height="20" rx="9" fill="#d4a574" transform="rotate(60 119 185)"/>
                        <rect x="95" y="180" width="18" height="25" rx="9" fill="#d4a574" transform="rotate(65 104 192)"/>
                        <rect x="80" y="180" width="18" height="20" rx="9" fill="#d4a574" transform="rotate(60 89 190)"/>
                        <rect x="65" y="180" width="15" height="18" rx="7.5" fill="#d4a574" transform="rotate(55 72.5 189)"/>
                    </svg>
                </div>
            </div>
            <div class="animation-status">
                <p class="status-text" data-i18n="strong-gripping">Strong Gripping...</p>
                <div class="bluetooth-indicator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6.5 6.5l11 11M12 3v6m0 6v6M3 12h6m6 0h6"/>
                    </svg>
                    <span id="strong-grip-command-text">Sending: STRONG_GRIP</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Calibration Screen -->
    <div id="calibration-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="calibration-title">EMG Calibration</h1>
        </div>
        <div class="screen-content">
            <div id="calibration-idle" class="calibration-idle">
                <div class="calibration-icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                </div>
                <p class="calibration-instruction" data-i18n="calibration-instruction">Follow the steps to calibrate your EMG sensors for optimal performance</p>
                <button class="btn-primary btn-large" onclick="startCalibration()" data-i18n="start-calibration">Start Calibration</button>
            </div>

            <div id="calibration-active" class="calibration-active" style="display: none;">
                <div class="calibration-step-card">
                    <h2 id="step-title" class="step-title" data-i18n="step1">Step 1: Relax your muscle</h2>
                    <p id="step-instruction" class="step-instruction" data-i18n="instruction1">Keep your muscle completely relaxed</p>
                    <div id="progress-container" class="progress-container" style="display: none;">
                        <p class="progress-label" data-i18n="measuring">Measuring...</p>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <div class="emg-waveform-card">
                    <h3 class="waveform-title">EMG Signal</h3>
                    <div class="waveform-container">
                        <canvas id="emg-waveform" width="300" height="128"></canvas>
                        <div class="emg-value-display">
                            <span id="emg-value">0</span>
                        </div>
                    </div>
                </div>

                <button id="calibration-next-btn" class="btn-primary btn-large" onclick="nextCalibrationStep()" data-i18n="next-step">Next Step</button>
            </div>

            <div id="calibration-complete" class="calibration-complete" style="display: none;">
                <div class="success-icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </div>
                <h2 class="success-title" data-i18n="calibration-complete">Calibration Complete!</h2>
                <p class="success-message" data-i18n="calibration-success">Your profile has been saved successfully</p>
                <button class="btn-primary btn-large" onclick="completeCalibration()" data-i18n="done">Done</button>
            </div>
        </div>
    </div>

    <!-- Training Mode Screen -->
    <div id="training-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="training-title">Balls Catch Game</h1>
        </div>
        <div class="screen-content training-content">
            <div id="training-start" class="training-start">
                <div class="trophy-icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M6 9v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9M6 9h12"/>
                    </svg>
                </div>
                <p class="training-instruction" data-i18n="catch-ball">Close your hand to catch!</p>
                <button class="btn-primary btn-large training-start-btn" onclick="startTrainingGame()" data-i18n="start-game">Start Game</button>
            </div>

            <div id="training-game" class="training-game" style="display: none;">
                <div class="game-stats">
                    <div class="stat-card">
                        <p class="stat-label" data-i18n="score">Score</p>
                        <p class="stat-value" id="game-score">0</p>
                    </div>
                    <div class="stat-card">
                        <p class="stat-label" data-i18n="time">Time</p>
                        <p class="stat-value" id="game-timer">60s</p>
                    </div>
                </div>

                <div id="game-area" class="game-area">
                    <div id="basket" class="basket"></div>
                </div>

                <div class="game-controls">
                    <button class="btn-move" onclick="moveBasketLeft()">← Move Left</button>
                    <button class="btn-move" onclick="moveBasketRight()">Move Right →</button>
                </div>
                <button class="btn-catch" onclick="catchBall()" data-i18n="close-hand-catch">Close Hand - Catch!</button>
            </div>

            <div id="training-end" class="training-end" style="display: none;">
                <div class="trophy-icon-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M6 9v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9M6 9h12"/>
                    </svg>
                </div>
                <h2 class="game-over-title" data-i18n="game-over">Game Over!</h2>
                <p class="final-score-label" data-i18n="final-score">Final Score</p>
                <p class="final-score-value" id="final-score">0</p>
                <button class="btn-primary btn-large" onclick="restartTrainingGame()" data-i18n="play-again">Play Again</button>
            </div>
        </div>
    </div>

    <!-- Progress Screen -->
    <div id="progress-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="progress-title">Progress Tracking</h1>
        </div>
        <div class="screen-content">
            <div class="progress-stats-grid">
                <div class="progress-stat-card">
                    <p class="stat-label-small" data-i18n="avg-accuracy">Avg Accuracy</p>
                    <p class="stat-value-large">77%</p>
                </div>
                <div class="progress-stat-card">
                    <p class="stat-label-small" data-i18n="avg-time">Avg Time</p>
                    <p class="stat-value-large">697ms</p>
                </div>
                <div class="progress-stat-card">
                    <p class="stat-label-small" data-i18n="total-grasps">Total Grasps</p>
                    <p class="stat-value-large">140</p>
                </div>
            </div>

            <div class="chart-card">
                <h3 class="chart-title" data-i18n="accuracy">Accuracy</h3>
                <canvas id="accuracy-chart" width="300" height="200"></canvas>
            </div>

            <div class="chart-card">
                <h3 class="chart-title" data-i18n="reaction-time">Reaction Time (ms)</h3>
                <canvas id="reaction-chart" width="300" height="200"></canvas>
            </div>

            <div class="chart-card">
                <h3 class="chart-title" data-i18n="successful-grasps">Successful Grasps</h3>
                <canvas id="grasps-chart" width="300" height="200"></canvas>
            </div>

            <div class="badges-card">
                <h3 class="badges-title" data-i18n="badges">Achievements</h3>
                <div class="badges-grid">
                    <div class="badge-item earned">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        <p>Steady Control</p>
                    </div>
                    <div class="badge-item earned">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                        <p>Fast Reflex</p>
                    </div>
                    <div class="badge-item earned">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <p>Consistent</p>
                    </div>
                    <div class="badge-item locked">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <p>Improving</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="settings-title">Settings</h1>
        </div>
        <div class="screen-content">
            <div class="settings-card">
                <div class="settings-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="2" y1="12" x2="22" y2="12"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                    <h3 data-i18n="language">Language</h3>
                </div>
                <select id="language-select" class="settings-select" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                    <option value="fr">Français</option>
                </select>
            </div>

            <div class="settings-card">
                <div class="settings-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <h3 data-i18n="mode">Mode</h3>
                </div>
                <div class="toggle-container">
                    <label class="toggle-label">
                        <span data-i18n="child-mode">Child Mode</span>
                        <input type="checkbox" id="child-mode-toggle" checked onchange="toggleChildMode(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-card">
                <div class="settings-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    <h3 data-i18n="emg-sensitivity">EMG Sensitivity</h3>
                </div>
                <select id="sensitivity-select" class="settings-select" onchange="changeSensitivity(this.value)">
                    <option value="low" data-i18n="low">Low</option>
                    <option value="medium" data-i18n="medium" selected>Medium</option>
                    <option value="high" data-i18n="high">High</option>
                </select>
            </div>

            <div class="settings-card">
                <div class="settings-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    <h3 data-i18n="battery-alerts">Battery Alerts</h3>
                </div>
                <div class="toggle-container">
                    <label class="toggle-label">
                        <span data-i18n="alert-20">Alert at 20%</span>
                        <input type="checkbox" id="alert-20" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="toggle-label">
                        <span data-i18n="alert-10">Alert at 10%</span>
                        <input type="checkbox" id="alert-10" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Logs Screen -->
    <div id="logs-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="logs-title">Activity Logs</h1>
        </div>
        <div class="screen-content">
            <div class="logs-list" id="logs-list">
                <!-- Logs will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- About Screen -->
    <div id="about-screen" class="screen">
        <div class="screen-header">
            <button class="back-btn" onclick="showScreen('control-screen')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="screen-title-text" data-i18n="about-title">About</h1>
        </div>
        <div class="screen-content">
            <div class="about-app-card">
                <div class="app-logo-large">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M2 12h20"/>
                    </svg>
                </div>
                <h2>SmartHand Trainer</h2>
                <p class="version-text" data-i18n="version">Version 1.0.0</p>
            </div>

            <div class="about-card">
                <p data-i18n="description">An assistive application that helps users control and train with EMG-based prosthetic hands through interactive games and exercises.</p>
            </div>

            <div class="about-card">
                <div class="about-card-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    <h3 data-i18n="how-to-use">How to Use</h3>
                </div>
                <div class="steps-list">
                    <p data-i18n="step1">1. Connect your prosthetic hand via Bluetooth</p>
                    <p data-i18n="step2">2. Calibrate the EMG sensors for your muscle signals</p>
                    <p data-i18n="step3">3. Practice control with interactive training games</p>
                    <p data-i18n="step4">4. Track your progress and improve over time</p>
                </div>
            </div>

            <div class="about-card safety-card">
                <div class="about-card-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    <h3 data-i18n="safety">Safety Information</h3>
                </div>
                <p data-i18n="safety-info">Always follow your healthcare provider's instructions. If you experience discomfort, stop using the device and consult your doctor.</p>
            </div>

            <div class="about-card">
                <div class="about-card-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                        <polyline points="22,6 12,13 2,6"/>
                    </svg>
                    <h3 data-i18n="support">Contact Support</h3>
                </div>
                <button class="btn-primary btn-large" onclick="contactSupport()" data-i18n="support-email">support@smarthand.com</button>
            </div>

            <div class="made-with">
                <p data-i18n="made-with">Made with</p>
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                <p data-i18n="for-users">for prosthetic hand users worldwide</p>
            </div>
        </div>
    </div>

    <!-- Voice Control Modal -->
    <div id="voice-modal" class="voice-modal" style="display: none;">
        <div class="voice-modal-content">
            <div class="voice-modal-header">
                <h3>Voice Control</h3>
                <button class="close-btn" onclick="closeVoiceControl()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="voice-control-content">
                <button id="voice-mic-btn" class="voice-mic-button" onclick="startVoiceListening()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="23"/>
                        <line x1="8" y1="23" x2="16" y2="23"/>
                    </svg>
                </button>
                <p id="voice-status" class="voice-status" data-i18n="tap-to-speak">Tap to speak</p>
                <div id="voice-commands" class="voice-commands">
                    <p class="voice-commands-label" data-i18n="supported-commands">Supported Commands:</p>
                    <div class="voice-commands-list">
                        <span data-i18n="cmd-open">Open</span>
                        <span data-i18n="cmd-close">Close</span>
                        <span data-i18n="cmd-grip">Grip</span>
                        <span data-i18n="cmd-stop">Stop</span>
                    </div>
                </div>
                <div id="voice-recognized" class="voice-recognized" style="display: none;">
                    <p class="voice-recognized-label" data-i18n="recognized">Command recognized:</p>
                    <p class="voice-recognized-command" id="recognized-command"></p>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
